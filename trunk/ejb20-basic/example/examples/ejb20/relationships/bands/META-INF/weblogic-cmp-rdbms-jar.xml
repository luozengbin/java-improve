<!DOCTYPE weblogic-rdbms-jar PUBLIC 
 '-//BEA Systems, Inc.//DTD WebLogic 8.1.0 EJB RDBMS Persistence//EN'
 'http://www.bea.com/servers/wls810/dtd/weblogic-rdbms20-persistence-810.dtd'>

<weblogic-rdbms-jar>
  <weblogic-rdbms-bean>
    <ejb-name>RecordingEJB</ejb-name>
    <data-source-name>examples-dataSource-demoXAPool</data-source-name>
    <table-map>
      <table-name>recordings</table-name>
      <field-map>
        <cmp-field>title</cmp-field>
        <dbms-column>title</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>bandName</cmp-field>
        <dbms-column>bandName</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>bandFounder</cmp-field>
        <dbms-column>bandFounder</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>numberSold</cmp-field>
        <dbms-column>numberSold</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>sales</cmp-field>
        <dbms-column>sales</dbms-column>
      </field-map>
      <field-map>
        <cmp-field>recordingDate</cmp-field>
        <dbms-column>recordingDate</dbms-column>
      </field-map>
    </table-map>
  </weblogic-rdbms-bean>

  <weblogic-rdbms-bean>
    <ejb-name>BandEJB</ejb-name>
    <data-source-name>examples-dataSource-demoXAPool</data-source-name>
    <table-map>
    <table-name>bands</table-name>
    <field-map>
       <cmp-field>name</cmp-field>
       <dbms-column>name</dbms-column>
    </field-map>
    <field-map>
       <cmp-field>founder</cmp-field>
       <dbms-column>founder</dbms-column>
    </field-map>
    <field-map>
       <cmp-field>startDate</cmp-field>
       <dbms-column>startDate</dbms-column>
    </field-map>
    </table-map>
    <weblogic-query>
      <query-method>
        <method-name>findByName</method-name>
        <method-params>
          <method-param>java.lang.String</method-param>
        </method-params>
      </query-method>
      <max-elements>100</max-elements>
    </weblogic-query>
  </weblogic-rdbms-bean>
 
  <weblogic-rdbms-bean>
    <ejb-name>FanClubEJB</ejb-name>
    <data-source-name>examples-dataSource-demoXAPool</data-source-name>
    <table-map>
    <table-name>FanClubs</table-name>
    <field-map>
       <cmp-field>bandName</cmp-field>
       <dbms-column>bandName</dbms-column>
    </field-map>
    <field-map>
       <cmp-field>bandFounder</cmp-field>
       <dbms-column>bandFounder</dbms-column>
    </field-map>
    <field-map>
      <cmp-field>text</cmp-field>
      <dbms-column>text</dbms-column>
    </field-map>
    <field-map>
      <cmp-field>memberCount</cmp-field>
      <dbms-column>memberCount</dbms-column>
    </field-map>
    </table-map>
  </weblogic-rdbms-bean>

  <weblogic-rdbms-bean>
    <ejb-name>ArtistEJB</ejb-name>
    <data-source-name>examples-dataSource-demoXAPool</data-source-name>
    <table-map>
    <table-name>Artists</table-name>
    <field-map>
      <cmp-field>name</cmp-field>
      <dbms-column>name</dbms-column>
    </field-map>
    <field-map>
      <cmp-field>id</cmp-field>
      <dbms-column>id</dbms-column>
    </field-map>
    </table-map>
    <delay-database-insert-until>ejbCreate</delay-database-insert-until>
    <automatic-key-generation>
      <generator-type>NAMED_SEQUENCE_TABLE</generator-type>
      <generator-name>artist_sequence</generator-name>
      <key-cache-size>1000</key-cache-size>
    </automatic-key-generation>
  </weblogic-rdbms-bean>

  <weblogic-rdbms-relation>
    <relation-name>Band-Recording</relation-name>
      <weblogic-relationship-role>
        <relationship-role-name>Recording-Has-Band</relationship-role-name>
	<relationship-role-map>
          <column-map>
            <foreign-key-column>bandName</foreign-key-column>
            <key-column>name</key-column>
          </column-map>
          <column-map>
            <foreign-key-column>bandFounder</foreign-key-column>
            <key-column>founder</key-column>
          </column-map>
	</relationship-role-map>
      </weblogic-relationship-role>
  </weblogic-rdbms-relation>

  <weblogic-rdbms-relation>
    <relation-name>Band-FanClub</relation-name>
      <weblogic-relationship-role>
        <relationship-role-name>FanClub-Has-Band</relationship-role-name>
	<relationship-role-map>
          <column-map>
            <foreign-key-column>bandName</foreign-key-column>
            <key-column>name</key-column>
          </column-map>
          <column-map>
            <foreign-key-column>bandFounder</foreign-key-column>
            <key-column>founder</key-column>
          </column-map>
	</relationship-role-map>
      </weblogic-relationship-role>
  </weblogic-rdbms-relation>

  <weblogic-rdbms-relation>
    <relation-name>Band-Artist</relation-name>
      <table-name>band_artist</table-name>
      <weblogic-relationship-role>
        <relationship-role-name>Bands-Have-Artists</relationship-role-name>
	<relationship-role-map>
        <column-map>
          <foreign-key-column>band_name</foreign-key-column>
          <key-column>name</key-column>
        </column-map>
        <column-map>
          <foreign-key-column>band_founder</foreign-key-column>
          <key-column>founder</key-column>
        </column-map>
	</relationship-role-map>
      </weblogic-relationship-role>
      <weblogic-relationship-role>
        <relationship-role-name>Artists-Have-Bands</relationship-role-name>
	<relationship-role-map>
        <column-map>
          <foreign-key-column>artist_id</foreign-key-column>
          <key-column>id</key-column>
        </column-map>
	</relationship-role-map>
      </weblogic-relationship-role>
  </weblogic-rdbms-relation>

  <create-default-dbms-tables>DropAndCreateAlways</create-default-dbms-tables>
</weblogic-rdbms-jar>
